<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/favicon.png"/>
	<link rel="shortcut icon" href="/img/favicon.png">
	<meta name="baidu-site-verification" content="code-KLcpk3wnwR" />
	
			<title>趙天一ლ(ﾟдﾟლ)You know、You don’t know</title>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, user-scalable=no"
/>
<link rel="stylesheet" href="/css/mic_main.css" />
<link rel="stylesheet" href="/css/dropdownMenu.css" />
<!-- <script src="/js/live2d/autoload.js"></script> -->

<meta name="keywords" content="Zssaer JavaWeb TIANYI ZHAO" />

<noscript>
  <link rel="stylesheet" href="/css/noscript.css" />
</noscript>
<style type="text/css">
  /* body{
    background: url('https://zssaer.oss-cn-chengdu.aliyuncs.com/wallhaven-r7r551.jpg?x-oss-process=style/wallpaper') center 0 no-repeat;
    content: " ";
    position: fixed;
  } */
  body:before {
    content: " ";
    position: fixed;
    top: 0;
    background: url('https://zssaer.oss-cn-chengdu.aliyuncs.com/wallhaven-r7r551.jpg?x-oss-process=style/wallpaper') center 0 no-repeat;

    right: 0;
    bottom: 0;
    left: 0;
    background-size: cover;
  }
</style>

			    

    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/jquery.min.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/jquery.scrollex.min.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/jquery.scrolly.min.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/skel.min.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/util.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/main.js"></script>
	
<meta name="generator" content="Hexo 5.4.0"></head>
    
		<!-- Layouts -->


<!--  代码渲染  -->
<script src="/js/prism.js"></script>
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body
  class=""
  data-prismjs-copy="复制"
  data-prismjs-copy-error="请按Ctrl+C手动复制"
  data-prismjs-copy-success="复制成功!"
>
  <div class="mask-border"></div>
  <!-- Wrapper 外包 s-->
  <div id="wrapper" class="fade-in">
    <!-- Intro 头部显示 s -->
    <!-- Intro 头部显示 e -->
    <!-- Header 头部logo start -->
    <header id="header">
    <a href="/" class="logo">Refrain</a>
</header>
    <!-- Nav 导航条 start -->
    <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">Home</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">Categories</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/C/">C++</a></li><li><a class="category-link" href="/categories/JAVA/">JAVA</a></li><li><a class="category-link" href="/categories/Python/">Python</a></li><li><a class="category-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li><a class="category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li><a class="category-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></li><li><a class="category-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a></li><li><a class="category-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="AboutMe">
		                AboutMe
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="Wallpaper">
		                Wallpaper
		            </a>
		        </li>
		        
		        <li>
		            <a href="/bangumis/" title="Bangumis">
		                Bangumis
		            </a>
		        </li>
		        
						<li class="active">
							<a href="#s1">Other</a>
											<ul class="submenu">
													<li>
													<a class="category-link" href="/another/billiard.html">台球模拟V1.0</a>
												</li>
											</ul>
						</li>

            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/Zssaer" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="git" href="https://gitee.com/Zssaer01" target="_blank" rel="noopener">
                            <i class="icon fa fa-git"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>
    <aside id="toc_menu"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Pinia-%E5%85%A8%E6%96%B0%E7%9A%84Vue%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">Pinia - 全新的Vue状态管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%AE%9A%E4%B9%89"><span class="toc-number">1.3.</span> <span class="toc-text">配置定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#state-%E5%AD%98%E5%82%A8%E7%8A%B6%E6%80%81"><span class="toc-number">1.4.</span> <span class="toc-text">state-存储状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#getters-%E8%AE%A1%E7%AE%97%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.</span> <span class="toc-text">getters-计算数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#actions-%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.</span> <span class="toc-text">actions-操作</span></a></li></ol></li></ol></aside>
    <div id="main">
      
      <div
        class="post_page_title_img"
        style="
          height: 25rem;
          background-image: url(https://zssaer.oss-cn-chengdu.aliyuncs.com/wallhaven-28ev39.png?x-oss-process=style/wallpaper);
          background-position: center;
          background-repeat: no-repeat;
          background-size: cover;
          -moz-background-size: cover;
          overflow: hidden;
        "
      >
        <a href="#" style="padding: 4rem 4rem 2rem 4rem"
          ><h2 id="page-title">Pinia - 全新的Vue状态管理</h2></a
        >
      </div>
      
      <button id="toc_button" onclick="openTocSidebar()">文章导航</button>
      <!-- <div id="content_toc">
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Pinia-%E5%85%A8%E6%96%B0%E7%9A%84Vue%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">Pinia - 全新的Vue状态管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%AE%9A%E4%B9%89"><span class="toc-number">1.3.</span> <span class="toc-text">配置定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#state-%E5%AD%98%E5%82%A8%E7%8A%B6%E6%80%81"><span class="toc-number">1.4.</span> <span class="toc-text">state-存储状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#getters-%E8%AE%A1%E7%AE%97%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.</span> <span class="toc-text">getters-计算数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#actions-%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.</span> <span class="toc-text">actions-操作</span></a></li></ol></li></ol>
            </div>     -->

      <!-- Post -->
      <div class="typo" style="padding: 3rem"><h1 id="Pinia-全新的Vue状态管理"><a href="#Pinia-全新的Vue状态管理" class="headerlink" title="Pinia - 全新的Vue状态管理"></a>Pinia - 全新的Vue状态管理</h1><p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/68747470733a2f2f70696e69612e7675656a732e6f72672f6c6f676f2e737667.svg"></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Pinia是目前Vue新一代的状态管理器，它除了适用于最新的Vue3之外，而能兼容Vue2。</p>
<p>谈到Vue的状态管理器，那不得不说起<a target="_blank" rel="noopener" href="https://zssaer.cn/2021/09/23/Vuex4/">VueX</a>，VueX目前已经推行到Vuex4了。但是随着Vue3官方极力推荐使用Composition API（组合式），慢慢的Vuex则显得不那么让人满足了，特别是Vuex的设计，虽然相较于React的Redux，Vuex属于十分容易学习的了，但是依然设计的繁琐。</p>
<p>Pina和Vuex 4是处于同一个开发时间线的项目，但是据官方QA中讲到，Pinia是Vuex的替代品,所以学习Pinia是目前Vue3的热门了。</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20220427163521.png"></p>
<p>Pinia相较于Vuex，基本也是一样的，同样的state、同样的getters、同样的actions。但是不一样的是vuex中同步异步的操作得分别存储到Mutation、Action，而Pinia中将同步和异步操作的统一归纳到了actions中，简化了类型。</p>
<p>Pinia拥有的特点：</p>
<ul>
<li>支持<code>options api</code> 和 <code>composition api</code></li>
<li>去除 <code>mutations</code> 比vuex更加精简</li>
<li>在页面或者组件直接引用后使用, 数据来源更加清晰调试更加方便</li>
<li>全面的<code>TypeScript</code>支持</li>
<li>服务器端渲染支持</li>
<li>轻量 压缩后的体积只有1kb左右</li>
</ul>
<p><strong>注意：虽然Pinia是取代Vuex的，但是目前由于vuex仍然比较完善，因此,pinia更加适合小型项目，vuex更加适合大型项目。</strong></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> pinia --save
//或 
<span class="token function">yarn</span> <span class="token function">add</span> pinia<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>安装之后还需要在vue中的入口文件main.js/main.ts 中进行设置使用，否则Pinia将不会被运作。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createPinia <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="配置定义"><a href="#配置定义" class="headerlink" title="配置定义"></a>配置定义</h2><p>安装加载后，在项目src根目录下创建一个store目录（当然这个名称不是固定的）。在文件夹下创建一个index.js/index.ts文件，用作状态存储配置。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineStore <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span>

<span class="token comment">// defineStore第一个参数为 唯一ID，Pinia使用它将store连接到devtools。</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="state-存储状态"><a href="#state-存储状态" class="headerlink" title="state-存储状态"></a>state-存储状态</h2><p>上面的配置中，state内部用作定义存储的状态数据。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      task<span class="token operator">:</span> <span class="token string">"Hello pinia!"</span><span class="token punctuation">,</span>
      counter<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>当然除了这样，可以省略掉return。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    task<span class="token operator">:</span> <span class="token string">"Hello pinia!"</span><span class="token punctuation">,</span>
    counter<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>对于state，Pinia支持在Vue3 Setup 中快速访问：</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> userStore <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 不能修改</span>
store<span class="token punctuation">.</span>counter<span class="token operator">++</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>当然直接这样提取出来是不能进行直接对象修改的，要知道只有为响应类型才能直接修改。</p>
<p>Pinia为我们提供了storeToRefs ，有了它配合ES6的解构 就支持将其store提取出的数据保持响应。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> userStore <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> storeToRefs <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> counter <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
<span class="token comment">// 修改成功</span>
counter<span class="token punctuation">.</span>value<span class="token operator">++</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>使用<code>store.$reset()</code>可以将其state全部数据复原。</p>
<p>在外部模块下，使用<code>$state </code>可以进行直接更改state，以及向其中添加state数据。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">store<span class="token punctuation">.</span>$state <span class="token operator">=</span> <span class="token punctuation">&#123;</span> counter<span class="token operator">:</span> <span class="token number">666</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Paimon'</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="getters-计算数据"><a href="#getters-计算数据" class="headerlink" title="getters-计算数据"></a>getters-计算数据</h2><p>getters几乎完全等同于computed函数，用于返回计算数据。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">getters<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">getTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token string">'This task is "'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>task <span class="token operator">+</span> <span class="token string">'"'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>或者使用ES6写法:</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">getters<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
	<span class="token function-variable function">getTask</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">'This task is "'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>task <span class="token operator">+</span> <span class="token string">'"'</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>除了提取state中的数据外，它还能提取到其他getter的数据进行计算。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">getters<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
	<span class="token function-variable function">getTask</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">'This task is "'</span> <span class="token operator">+</span> state<span class="token punctuation">.</span>task <span class="token operator">+</span> <span class="token string">'"'</span><span class="token punctuation">,</span>
    get<span class="token operator">:</span> <span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>getTask<span class="token operator">+</span> <span class="token string">'!!'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>它在vue文件中可以直接获取使用。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    store<span class="token punctuation">.</span>counter <span class="token operator">=</span> <span class="token number">3</span>
    store<span class="token punctuation">.</span>doubleCount <span class="token comment">// 6</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="actions-操作"><a href="#actions-操作" class="headerlink" title="actions-操作"></a>actions-操作</h2><p>actions相当于组件的方法，可以用它定义各种定义方法操作。<strong>非常适合定义业务逻辑</strong>。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">actions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>它和getters一样，也是在vue文件中直接获取使用。</p>
<p>像getter一样，动作通过<strong>完全输入（和自动完成✨）支持</strong>访问<em>整个store实例</em>。<strong>与它们不同的是，它可以是异步的</strong>，您可以在它们内部进行任何 API 调用甚至其他操作！使用<code>async</code>即可定义异步操作。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">actions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">async</span> <span class="token function">registerUser</span><span class="token punctuation">(</span>login<span class="token punctuation">,</span> password<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> login<span class="token punctuation">,</span> password <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token function">showTooltip</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Welcome back </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>userData<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">showTooltip</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token comment">// let the form component display the error</span>
        <span class="token keyword">return</span> error
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





</div>

      <!-- Post Comments -->
      
    <!-- 使用 changyan -->
<div id="changyan-comment">
    <!--PC和WAP自适应版-->
<div id="SOHUCS" sid="2022/04/27/pinia/"  ></div>
<script type="text/javascript">
(function(){
var appid = 'cyvzq2tmJ';
var conf = 'e61bcf9ca7baef66559e7e33e21fe290';
var width = window.innerWidth || document.documentElement.clientWidth;
if (width < 960) {
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

</div>
<style>
    #changyan-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

    </div>
    <!-- Copyright 版权 start -->
    <div id="copyright">
  <ul>
    <li>
      &copy;Powered By
      <a target="_blank" rel="noopener" href="https://hexo.io/" style="border-bottom: none">hexo</a>
    </li>
    <li>Author: <a style="border-bottom: none">@Zssaer</a></li>
  </ul>
  <ul>
    <li>
      <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" id="beian">蜀ICP备2021031070号</a>
    </li>
  </ul>
  
  <span id="busuanzi_container_site_pv"> 2024 </span>
  
</div>

  </div>
  <script>
    const originalTitle = document.title;
    document.title = `Pinia - 全新的Vue状态管理` + `|` + originalTitle;
  </script>
</body>



 	
</html>
