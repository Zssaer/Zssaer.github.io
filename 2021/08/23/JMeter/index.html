<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/favicon.png"/>
	<link rel="shortcut icon" href="/img/favicon.png">
	<meta name="baidu-site-verification" content="code-KLcpk3wnwR" />
	
			<title>趙天一ლ(ﾟдﾟლ)You know、You don’t know</title>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, user-scalable=no"
/>
<link rel="stylesheet" href="/css/mic_main.css" />
<link rel="stylesheet" href="/css/dropdownMenu.css" />
<!-- <script src="/js/live2d/autoload.js"></script> -->

<meta name="keywords" content="Zssaer JavaWeb TIANYI ZHAO" />

<noscript>
  <link rel="stylesheet" href="/css/noscript.css" />
</noscript>
<style type="text/css">
  /* body{
    background: url('https://zssaer.oss-cn-chengdu.aliyuncs.com/wallhaven-r7r551.jpg?x-oss-process=style/wallpaper') center 0 no-repeat;
    content: " ";
    position: fixed;
  } */
  body:before {
    content: " ";
    position: fixed;
    top: 0;
    background: url('https://zssaer.oss-cn-chengdu.aliyuncs.com/wallhaven-r7r551.jpg?x-oss-process=style/wallpaper') center 0 no-repeat;

    right: 0;
    bottom: 0;
    left: 0;
    background-size: cover;
  }
</style>

			    

    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/jquery.min.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/jquery.scrollex.min.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/jquery.scrolly.min.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/skel.min.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/util.js"></script>
    <script src="https://zssaer.oss-cn-chengdu.aliyuncs.com/main.js"></script>
	
<meta name="generator" content="Hexo 5.4.0"></head>
    
		<!-- Layouts -->


<!--  代码渲染  -->
<script src="/js/prism.js"></script>
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body
  class=""
  data-prismjs-copy="复制"
  data-prismjs-copy-error="请按Ctrl+C手动复制"
  data-prismjs-copy-success="复制成功!"
>
  <div class="mask-border"></div>
  <!-- Wrapper 外包 s-->
  <div id="wrapper" class="fade-in">
    <!-- Intro 头部显示 s -->
    <!-- Intro 头部显示 e -->
    <!-- Header 头部logo start -->
    <header id="header">
    <a href="/" class="logo">Refrain</a>
</header>
    <!-- Nav 导航条 start -->
    <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">Home</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">Categories</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/C/">C++</a></li><li><a class="category-link" href="/categories/JAVA/">JAVA</a></li><li><a class="category-link" href="/categories/Python/">Python</a></li><li><a class="category-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li><a class="category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li><a class="category-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></li><li><a class="category-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a></li><li><a class="category-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="AboutMe">
		                AboutMe
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="Wallpaper">
		                Wallpaper
		            </a>
		        </li>
		        
		        <li>
		            <a href="/bangumis/" title="Bangumis">
		                Bangumis
		            </a>
		        </li>
		        
						<li class="active">
							<a href="#s1">Other</a>
											<ul class="submenu">
													<li>
													<a class="category-link" href="/another/billiard.html">台球模拟V1.0</a>
												</li>
											</ul>
						</li>

            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/Zssaer" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="git" href="https://gitee.com/Zssaer01" target="_blank" rel="noopener">
                            <i class="icon fa fa-git"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>
    <aside id="toc_menu"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">压力测试工具-JMeter</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8CJmeter"><span class="toc-number">1.1.</span> <span class="toc-text">运行Jmeter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.</span> <span class="toc-text">创建测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.</span> <span class="toc-text">进行测试</span></a></li></ol></li></ol></aside>
    <div id="main">
      
      <div
        class="post_page_title_img"
        style="
          height: 25rem;
          background-image: url(https://zssaer.oss-cn-chengdu.aliyuncs.com/wallhaven-3kkmxd.jpg?x-oss-process=style/wallpaper);
          background-position: center;
          background-repeat: no-repeat;
          background-size: cover;
          -moz-background-size: cover;
          overflow: hidden;
        "
      >
        <a href="#" style="padding: 4rem 4rem 2rem 4rem"
          ><h2 id="page-title">压力测试工具-JMeter</h2></a
        >
      </div>
      
      <button id="toc_button" onclick="openTocSidebar()">文章导航</button>
      <!-- <div id="content_toc">
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">压力测试工具-JMeter</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8CJmeter"><span class="toc-number">1.1.</span> <span class="toc-text">运行Jmeter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.</span> <span class="toc-text">创建测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.</span> <span class="toc-text">进行测试</span></a></li></ol></li></ol>
            </div>     -->

      <!-- Post -->
      <div class="typo" style="padding: 3rem"><h1 align = "center">压力测试工具-JMeter</h1>

<p>学习了<a target="_blank" rel="noopener" href="https://zssaer.cn/2021/08/20/sentinel/">Sentinel框架</a>框架后，为了测试并发等功能，需要使用工具才行。</p>
<p>这儿简绍Apache JMeter -基于Java开发的压力测试工具。</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/8ad4b31c8701a18bc4cdb31613c2b70e2938febd.jpeg"></p>
<p>进行Http多线程测试操作:</p>
<p>由于JMeter是基于JAVA编写,所以首先确保操作系统拥有JAVA运行环境才行。</p>
<h2 id="运行Jmeter"><a href="#运行Jmeter" class="headerlink" title="运行Jmeter"></a>运行Jmeter</h2><p>前往官网下载JMeter：<a target="_blank" rel="noopener" href="http://jmeter.apache.org/download_jmeter.cgi">http://jmeter.apache.org/download_jmeter.cgi</a>，最新版本已经支持中文语言。</p>
<p>下载后解压，打开bin\jmeter.bat文件，会弹出二个窗口，一个为Shell，一个为JMeter的GUI应用。</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20220210103750.png"></p>
<p><em><strong>注意：在Shell上明确的提到了测试，不要使用GUI直接进行正常测试，GUI只是用来创建测试文件和测试Debug的。</strong></em></p>
<p>所以需要先在GUI上创建对应的测试，然后简单试一下是否能成功，成功后在Shell上使用命令来进行执行测试。</p>
<p>至于为什么这样规定，JMeter官方是这样回答的：</p>
<blockquote>
<p>GUI下会本身会消耗大量JVM内存资源，并且调用资源不平衡，所以在GUI下直接进行测试的话，测试就会变得不稳定，得出来响应结果不真实，在大型测试环境下甚至会崩溃。</p>
</blockquote>
<p>我们先看GUI，JMeter默认为英文界面，但是内置含有简体中文，需要手动切换。通过 【Options】-&gt;【Choose Language】变更为简体中文。</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819172921.png"></p>
<h2 id="创建测试"><a href="#创建测试" class="headerlink" title="创建测试"></a>创建测试</h2><p>下面开始创建测试</p>
<p>在<code>测试计划</code>右击选择添加/线程/线程组</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819173126.png"></p>
<p>线程组右边的线程属性,线程数表示启动多少线程(相当于用户数量),Ramp-UP时间代表隔多长时间执行，0代表同时并发。而循环次数不言而喻就是反复循环测试次数。</p>
<p>设置好后再在<code>线程组</code>上右击添加/配置与元件/HTTP请求默认值,来进行配置每个HTTP请求的默认值。</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819173621.png"></p>
<p>之所以使用<code>HTTP请求的默认值</code>,就是为了方便大规模接口测试,可以先将Http地址确认下来。</p>
<p>然后再在<code>HTTP请求的默认值</code>中设置基本地址和端口:</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819173842.png"></p>
<p>设置好基本值后,然后再在<code>线程组</code>上右击选择添加/取样器/HTTP请求,设置测试请求。</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819174009.png"></p>
<p>设置其HTTP请求的需要测试的路径和请求方法。由于我们上面已经设置了HTTP请求的默认值,所以这儿的服务器IP\端口这些都不需要再次填写。</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819174109.png"></p>
<p>如果是POST请求的话，除了使用其参数之外还可以使用Json来进行为载体。</p>
<p>只需要将其切换为“消息体数据”后添加Json：</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/image-20220210103037823.png" alt="image-20220210103037823"></p>
<p>因为采用Json为请求内容，所以Http请求头就应该新增Json的标识：</p>
<p>在<code>HTTP请求</code>上右击,点击添加/配置元件HTTP信息头管理器，用来在请求头部中新增内容，Json的话就应该新增Content-Type:application/json。</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20220210103216.png"></p>
<p>当然对于需要认证的接口，我们可以在头部添加Token内容。</p>
<p>在<code>HTTP请求</code>上右击,点击添加/断言/响应断言,来为该请求测试设置断言,来进行每次测试的判断,判断是否成功还是失败。</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819174353.png"></p>
<p>设置其断言判断,由于网页的请求采取Rest方式,不管是Json还是什么,都是以文本,所以这儿测试字段 设置为<code>响应文本</code>,然后再在选择判断条件,以及设置相关判断参数.</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819174543.png"></p>
<p>我们再在<code>线程组</code>上右击,点击监听器/察看结果树,来测试返回结果</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819174833.png"></p>
<p>好了,最后点击上方工具栏中的第一个绿色箭头 启动整个测试.最后在<code>察看结果树</code>便可以看见结果,由于我们对请求设置了断言,所以其中成功和失败一目了然:</p>
<p><img src="https://zssaer.oss-cn-chengdu.aliyuncs.com/20210819175124.png"></p>
<p>我们可以在设置一个汇总报告，用来将其测试数据的测试结果进行明确展示和导出。</p>
<p>在线程组上右键 【添加】–&gt;【监听器】–&gt;【汇总报告】即可。</p>
<p>这便是简易的JMeter的创建Http压力测试的方法教程。</p>
<h2 id="进行测试"><a href="#进行测试" class="headerlink" title="进行测试"></a>进行测试</h2><p>前面我们提过，执行测试计划不能用GUI，需要用命令行来执行。</p>
<p>首先需要在Jmeter GUI上将我们创建的测试导出为jmx格式。</p>
<p>点击文件\保存测试计划 即可保存。</p>
<p>我们打开一个新的Shell窗口，将其定位到Jmeter下的bin文件夹下，输入下面命令来进行测试：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">jmeter -n -t <span class="token punctuation">[</span>jmx file<span class="token punctuation">]</span> -l <span class="token punctuation">[</span>results file<span class="token punctuation">]</span> -e -o <span class="token punctuation">[</span>Path to web report folder<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>举个例子：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">jmeter -n -t test/RedisLock.jmx -l testplan/result/result.txt -e -o testplan/webreport<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><code>test/RedisLock.jmx</code> 为提供的测试计划文件<br><code>testplan/result/result.txt</code> 为测试结果文件保存的路径和文件名<br><code>testplan/webreport</code> 为web报告保存路径。</p>
</div>

      <!-- Post Comments -->
      
    <!-- 使用 changyan -->
<div id="changyan-comment">
    <!--PC和WAP自适应版-->
<div id="SOHUCS" sid="2021/08/23/JMeter/"  ></div>
<script type="text/javascript">
(function(){
var appid = 'cyvzq2tmJ';
var conf = 'e61bcf9ca7baef66559e7e33e21fe290';
var width = window.innerWidth || document.documentElement.clientWidth;
if (width < 960) {
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

</div>
<style>
    #changyan-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

    </div>
    <!-- Copyright 版权 start -->
    <div id="copyright">
  <ul>
    <li>
      &copy;Powered By
      <a target="_blank" rel="noopener" href="https://hexo.io/" style="border-bottom: none">hexo</a>
    </li>
    <li>Author: <a style="border-bottom: none">@Zssaer</a></li>
  </ul>
  <ul>
    <li>
      <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" id="beian">蜀ICP备2021031070号</a>
    </li>
  </ul>
  
  <span id="busuanzi_container_site_pv"> 2024 </span>
  
</div>

  </div>
  <script>
    const originalTitle = document.title;
    document.title = `压力测试工具-JMeter` + `|` + originalTitle;
  </script>
</body>



 	
</html>
