---
    title: EasyCaptcha-快速生成图像验证码   # 文章标题  
    date: 
    tags:
    - JAVA
    categories: JAVA # 分类
    thumbnail: http://img.zssaer.cn/hope.png # 略缩图
---
<h1 align = "center">EasyCaptcha-快速生成图像验证码</h1>

EasyCaptcha可以快速生成各种类型的Java图形验证码，支持gif、中文、算术等类型，可用于Java Web、JavaSE等项目。
GitHub项目:https://github.com/whvcse/EasyCaptcha

[![验证码](https://camo.githubusercontent.com/081203129e2874035986b89a0240c2514cb75cb0b26031dcb435c15ca47d1fbd/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73467245382e706e67)](https://camo.githubusercontent.com/081203129e2874035986b89a0240c2514cb75cb0b26031dcb435c15ca47d1fbd/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73467245382e706e67)   [![验证码](https://camo.githubusercontent.com/9f780acff1301c6b89f8a0815b073de992c57d2a4fdd67b44dbf34e0a085911a/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73463044502e706e67)](https://camo.githubusercontent.com/9f780acff1301c6b89f8a0815b073de992c57d2a4fdd67b44dbf34e0a085911a/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73463044502e706e67)   [![验证码](https://camo.githubusercontent.com/0caff5f58f2e719eafa4af79dfef209bc4c04c2385f0eced4168733d9cfc3b54/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73467775742e706e67)](https://camo.githubusercontent.com/0caff5f58f2e719eafa4af79dfef209bc4c04c2385f0eced4168733d9cfc3b54/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73467775742e706e67)
[![验证码](https://camo.githubusercontent.com/3f8cf4ea825529d6fb66f14c898cbfeba4e67bce84ca6ed64186f34a4951dae7/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73467a564b2e676966)](https://camo.githubusercontent.com/3f8cf4ea825529d6fb66f14c898cbfeba4e67bce84ca6ed64186f34a4951dae7/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73467a564b2e676966)   [![验证码](https://camo.githubusercontent.com/a6c0c62c04669eea15af86b6fcb006517e3449346b1ca3f056f759ebf0e2ae2b/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73467662362e676966)](https://camo.githubusercontent.com/a6c0c62c04669eea15af86b6fcb006517e3449346b1ca3f056f759ebf0e2ae2b/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73467662362e676966)   [![验证码](https://camo.githubusercontent.com/67772e01f47cc25eb163ee064e50cf7b376b5690f4ddb0a9512b728a79df9a96/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d7346584b312e676966)](https://camo.githubusercontent.com/67772e01f47cc25eb163ee064e50cf7b376b5690f4ddb0a9512b728a79df9a96/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d7346584b312e676966)

**算术类型：**

[![验证码](https://camo.githubusercontent.com/5ad376ced241524ff7059a16f5b7f8ad9887b55f5c1e5e0c4088c5544c97872e/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b4b50672e706e67)](https://camo.githubusercontent.com/5ad376ced241524ff7059a16f5b7f8ad9887b55f5c1e5e0c4088c5544c97872e/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b4b50672e706e67)   [![验证码](https://camo.githubusercontent.com/2680b6a2f0e9623e0455a72020319cbeb74b2ef2725f5454821f7563a027e418/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b6e49532e706e67)](https://camo.githubusercontent.com/2680b6a2f0e9623e0455a72020319cbeb74b2ef2725f5454821f7563a027e418/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b6e49532e706e67)   [![验证码](https://camo.githubusercontent.com/e9acc0d4254ef2e21856d5a1c5e4f7e79251aed35f0b34918d7673f343619386/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b6d61382e706e67)](https://camo.githubusercontent.com/e9acc0d4254ef2e21856d5a1c5e4f7e79251aed35f0b34918d7673f343619386/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b6d61382e706e67)

**中文类型：**

[![验证码](https://camo.githubusercontent.com/9b28eeac6c16cbb1779a826161b0c7d484430e9d2c264948a0ca9e4db9d59e36/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b63644b2e706e67)](https://camo.githubusercontent.com/9b28eeac6c16cbb1779a826161b0c7d484430e9d2c264948a0ca9e4db9d59e36/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b63644b2e706e67)   [![验证码](https://camo.githubusercontent.com/e2c03a1718452d790d248f6461a490074f891561b35deb518f92c3c0e9031b71/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b365a362e706e67)](https://camo.githubusercontent.com/e2c03a1718452d790d248f6461a490074f891561b35deb518f92c3c0e9031b71/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b365a362e706e67)   [![验证码](https://camo.githubusercontent.com/48e7b6c10662eeafbd519e0b675ed3ff55e9175c7622c225fde31a8fcdf599d0/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b7371782e706e67)](https://camo.githubusercontent.com/48e7b6c10662eeafbd519e0b675ed3ff55e9175c7622c225fde31a8fcdf599d0/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d736b7371782e706e67)

**内置字体：**

[![验证码](https://camo.githubusercontent.com/8629dd27492ee45fd77d64eadccba9257a147b8bd48dd58a7ffd44b83621ab37/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d734156534a2e706e67)](https://camo.githubusercontent.com/8629dd27492ee45fd77d64eadccba9257a147b8bd48dd58a7ffd44b83621ab37/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d734156534a2e706e67)   [![验证码](https://camo.githubusercontent.com/9512176164c7f0317e09e4b2bfeba26f69bf9d31bde6d21d634c7afc6ada5485/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73414157342e706e67)](https://camo.githubusercontent.com/9512176164c7f0317e09e4b2bfeba26f69bf9d31bde6d21d634c7afc6ada5485/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73414157342e706e67)   [![验证码](https://camo.githubusercontent.com/d30c48f5493c3078ddfc8e0b392759f7ebf0010f597b495a58a2630839cad39b/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73416b59462e706e67)](https://camo.githubusercontent.com/d30c48f5493c3078ddfc8e0b392759f7ebf0010f597b495a58a2630839cad39b/68747470733a2f2f73322e617831782e636f6d2f323031392f30382f32332f6d73416b59462e706e67)

## 快速使用:

### Maven依赖

```xml
<!-- 验证码easy-captcha -->
<dependency>
   <groupId>com.github.whvcse</groupId>
   <artifactId>easy-captcha</artifactId>
   <version>1.6.2</version>
</dependency>
```

### 使用方法

```java
// png类型
SpecCaptcha captcha = new SpecCaptcha(130, 48,5);
// gif类型
GifCaptcha captcha = new GifCaptcha(130, 48);
// 算数类型验证码
ArithmeticCaptcha captcha = new ArithmeticCaptcha(130, 48);
// 中文类型
ChineseCaptcha captcha = new ChineseCaptcha(130, 48);
```

```java
// 几位数运算，默认为两位
captcha.setLen(2);
// 获取运算的公式：3+2=?
captcha.getArithmetixcString();
// 获取运算的结果：5
String value = captcha.text();
```

```java
String key = UuidUtil.createUuid();
// 存入redis并设置过期时间为5分钟
RedisUtil.set(key, value, 600);
HashMap<String, String> captchaMap = new HashMap<String, String>(2);
captchaMap.put("captchaKey", key);
captchaMap.put("image", captcha.toBase64());
// 将key和验证码base64返回给前端
return Result.success(captchaMap);
```

AJAX 刷新验证码

```javascript
function refreshcode(obj)
{
  obj.src="/captcha?id="+Math.random();
};
```

```html
<img src="/captcha" width="105px" height="45px" onclick="refreshcode(this)" />
```



### 在SpringBoot中

```java
/**
 * @description: TODO
 * @author: Zhaotianyi
 * @time: 2021/5/10 15:55
 */
@Api(tags = {"图片验证码管理"})
@Controller
public class CaptchaController {
    @Autowired
    private ImgValidService imgValidService;

    @ResponseBody
    @GetMapping("/captcha")
    public Result captcha() throws Exception {
        SpecCaptcha specCaptcha = new SpecCaptcha(128, 48, 5);
        String verCode = specCaptcha.text().toLowerCase();
        String MD5verCode = new Md5Hash(verCode).toHex();

        imgValidService.add(MD5verCode,verCode);
        return ResultBuilder.successResult(new CaptchaResp(specCaptcha.toBase64(),MD5verCode));
    }
}
```

其中ImgValidService 为验证码保存业务类, 将其生成的验证码的Md5码和真实验证码内容保存 至持久化工具(如Nosql,Redis,MongoDb等),以便后面进行验证码认证操作.